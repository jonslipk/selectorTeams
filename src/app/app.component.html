<div class="container">
  <header class="header">
    <h1>âš½ Seletor de Times Fut</h1>
  </header>

  <!-- NavegaÃ§Ã£o de Abas -->
  <nav class="tabs-navigation">
    <button
      class="tab-button"
      [class.active]="activeTab === 'selection'"
      (click)="setActiveTab('selection')">
      ğŸ“ SeleÃ§Ã£o de Jogadores
    </button>
    <button
      class="tab-button"
      [class.active]="activeTab === 'teams'"
      (click)="setActiveTab('teams')">
      ğŸ† Times Montados
    </button>
    <button
      class="tab-button"
      [class.active]="activeTab === 'scouts'"
      (click)="setActiveTab('scouts')">
      ğŸ† Scouts
    </button>
  </nav>

  <!-- ConteÃºdo das Abas -->
  <main class="tabs-content">
    <!-- Aba: SeleÃ§Ã£o de Jogadores -->
    <div class="tab-pane" *ngIf="activeTab === 'selection'">
      <app-player-selection
        (generateTeams)="onGenerateTeams()">
      </app-player-selection>
    </div>

    <!-- Aba: Times Montados -->
    <div class="tab-pane" *ngIf="activeTab === 'teams'">


      <app-teams-display
        [teams]="teams"
        [headToHeadPlayers]="getHeadToHeadPlayers()"
        [remainingPlayers]="remainingPlayers"
        [playCount]="playerCount"
        [lastActionsByPlayer]="lastActionsByPlayer"
        (playerAction)="onPlayerAction($event)"
        (winnerDeclared)="onMatchWinner($event)"
        (drawDeclared)="onMatchDraw()">
      </app-teams-display>


      <!-- Jogadores Sem Time (Se houver) -->
      <div class="leftover-players-section" *ngIf="remainingPlayers.length > 0">
        <table class="remaining-players-table">
          <thead>
            <tr>
              <th>Jogador</th>
            </tr>
          </thead>
          <tbody id="playersList">
            <tr *ngFor="let player of remainingPlayers; let i = index">
             <td colspan="2">
                        <div class="player-row">
                            <span class="player-name">{{player}}</span>
                            <button (click)="removeNewPlayer(i)" class="btn-remove">âœ•</button>
                        </div>
                    </td>
            </tr>

          </tbody>
        </table>
      </div>

       <!-- SeÃ§Ã£o para Adicionar Novos Jogadores -->
      <div *ngIf="teams.length !== 0" class="add-players-section" >
        <h2>â• Adicionar Novos Jogadores</h2>
        <div class="add-players-form">
          <div class="form-group-inline">
            <input
              type="text"
              [(ngModel)]="newPlayerInput"
              (keyup.enter)="addNewPlayer()"
              placeholder="Digite o nome do novo jogador"
              class="input-new-player">
            <button (click)="addNewPlayer()" class="btn-add-player">Adicionar</button>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane" *ngIf="activeTab === 'scouts'">
      <ng-container *ngIf="scouts && scouts.length > 0; else emptyScouts">
        <app-scouts-display [scouts]="scouts">
        </app-scouts-display>
      </ng-container>
      <ng-template #emptyScouts>
        <div class="empty-state">
          <p>Nenhum scout registrado ainda. Selecione aÃ§Ãµes em 'Times Montados' para comeÃ§ar a registrar.</p>
        </div>
      </ng-template>
    </div>
  </main>
</div>

